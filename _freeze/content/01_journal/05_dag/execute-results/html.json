{
  "hash": "14e0aa99ac67c3b341f6355bfa0ba0e5",
  "result": {
    "markdown": "---\ntitle: \"Directed Acyclic Graphs\"\n---\n\n\n# Load packages\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-1_ed1d616d26732bd9507d1cfc8464e91f'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(dagitty)\nlibrary(ggdag)\n\nsetwd(\"D:/CausalDataScience/cdsba-LukasB2324/content/01_journal\")\n```\n:::\n\n\n\n\n# Assignment 1\n## Confounder\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-2_7b404b4768d423bed7414a629fa2c40c'}\n\n```{.r .cell-code}\nconfounding <- dagify(\n  X ~ Z,\n  Y ~ Z,\n  Y ~ X,\n  coords = list(x = c(Y = 3, Z = 2, X = 1),\n                y = c(Y = 0, Z = 1, X = 0)),\n  labels = list(X = \"parking spots\",\n                Y = \"sales\",\n                Z = \"location\")\n)\n```\n:::\n\n\n## Plot DAG\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-3_ddfc0fa61abc5a2417d302ba06e39962'}\n\n```{.r .cell-code}\nggdag(confounding) +\n  geom_dag_point() +\n  geom_dag_text() +\n  geom_dag_edges() +\n  geom_dag_label_repel(aes(label = label)) +\n  theme_dag_blank()\n```\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n# Assignment 2\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-4_1541d611599f90a414b2ca07c3626da2'}\n\n```{.r .cell-code}\ncustomer_sat<-readRDS(\"Data/customer_sat.rds\")\n```\n:::\n\n## NOT conditioning on subscription\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-5_2d8d9d19d74a5e071ef042695cfd032b'}\n\n```{.r .cell-code}\nlm_2_1<-lm(satisfaction~., customer_sat[,1:2])\nsummary(lm_2_1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = satisfaction ~ ., data = customer_sat[, 1:2])\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -12.412  -5.257   1.733   4.506  12.588 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  78.8860     4.2717  18.467 1.04e-10 ***\n#> follow_ups   -3.3093     0.6618  -5.001 0.000243 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 7.923 on 13 degrees of freedom\n#> Multiple R-squared:  0.658,\tAdjusted R-squared:  0.6316 \n#> F-statistic: 25.01 on 1 and 13 DF,  p-value: 0.0002427\n```\n:::\n:::\n\n## Conditioning on subscription\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-6_d745e30692a46ecacd06c294305b9c5b'}\n\n```{.r .cell-code}\nlm_2_2<-lm(satisfaction~., customer_sat)\nsummary(lm_2_2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = satisfaction ~ ., data = customer_sat)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -4.3222 -2.1972  0.3167  2.2667  3.9944 \n#> \n#> Coefficients:\n#>                      Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)           26.7667     6.6804   4.007  0.00206 ** \n#> follow_ups             2.1944     0.7795   2.815  0.01682 *  \n#> subscriptionPremium   44.7222     5.6213   7.956 6.88e-06 ***\n#> subscriptionPremium+  18.0722     2.1659   8.344 4.37e-06 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 2.958 on 11 degrees of freedom\n#> Multiple R-squared:  0.9597,\tAdjusted R-squared:  0.9487 \n#> F-statistic: 87.21 on 3 and 11 DF,  p-value: 5.956e-08\n```\n:::\n:::\n\n\n\n# Assignment 3\nFor the regression without conditioning on the subscription, there is a negative correlation of about 3.3 between the follow_ups and the satisfaction, so the follow_ups seem to annoy the customers. When conditioning the regression on the subscription, a positive correlation of about 2.2 between the satisfaction and the follow_ups can be observed. This indicates, that the satisfaction correlates negatively with the level of subscription. Therefore, the customers seem to value the follow_ups but not the benefits of a higher subscription level.\n\n\n# Assignment 4\n## NOT conditioning on subscription\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-7_4f4ceeb958249e124c9fb7ee8d33f8c2'}\n\n```{.r .cell-code}\nsimps_not_cond <- ggplot(customer_sat[,1:2], aes(x = follow_ups, y = satisfaction)) +\n  geom_point(alpha = .8) +\n  stat_smooth(method = \"lm\", se = F)\nsimps_not_cond\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n## Conditioning on subscription  \n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-8_23f656d74d3ddc01bf25d5cc8ced1a78'}\n\n```{.r .cell-code}\nsimps_cond <- ggplot(customer_sat, aes(x = follow_ups, y = satisfaction, color = subscription)) +\n  geom_point(alpha = .8) +\n  stat_smooth(method = \"lm\", se = F) +\n  theme(legend.position = \"right\")\nsimps_cond\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}